<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->  
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->  
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->  
<head>
    <title>purplecheer.io sdk documentation</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">    
    <link rel="shortcut icon" href="REPLFavIcon">  
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">   
    <!-- Plugins CSS -->    
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">
    <!-- below copied from www2 -->
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/font-awesome.css" rel="stylesheet"> 
    <link href="css/easy-responsive-tabs.css" rel='stylesheet' type='text/css'/>
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="icon" href="REPLFavIcon" type="image/x-icon" />
    <link rel="icon" type="image/png" href="REPLFavIcon" />
    <link rel="shortcut icon" href="REPLFavIcon" type="image/x-icon" />
    <!-- above copied from www2 -->    
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    </head> 

<body class="landing-page">   
     
    
    <div class="page-wrapper">
        
        <div class="banner1" id="home">
            <!-- header -->
            <header>
                <div class="container-fluid">
                    <div class="pclogo">REPLLogo</div>
                    <!-- navigation -->
                    <nav class="navbar navbar-default ayanEffects ayanHoverEffect_7">
                        <!-- Brand and toggle get grouped for better mobile display -->
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>				
                        </div>
        
                        <!-- Collect the nav links, forms, and other content for toggling -->
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                            <ul class="nav navbar-nav">
                            <!-- <li><a class="active" href="index.html">Home</a></li> -->
                                <li><a href="/documentation">Home</a></li>
                                <li><a href="/servicelist">Services</a></li>
                                <li><a href="/test">API-Test</a></li>
                                <li><a href="/testhttp">REST-Endpoint-Test</a></li>
                            </ul>
                        </div><!-- /.navbar-collapse -->	  
                    </nav>
                    <div class="clearfix"></div>
                    <!-- //navigation -->
                </div>
            </header>
        </div>
            
        <!--
        <section class="cards-section">
        -->
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                        <h1 class="doc-title"><i class="icon fa fa-cogs"></i> purplecheer.io Test framework for SDK</h1>
                </div><!--//doc-header-->
                    <!--
                        <h2 class="title">purplecheer.io Test framework for SDK
                    <a href="/testrest"><span class="label label-primary">Http-Endpoint</span></a>
                    </h2>
                        -->
                <div class="doc-body">
                    <div class="doc-content">
                        <div class="content-inner">
                            <div id="cards-wrapper" class="cards-wrappernm row">
                                <div class="item item-purpleright col-md-5 col-sm-6 col-xs-6">
                                    <h4 class="hdg wow input-group fadeInUp animated" data-wow-delay=".5s">API Test</h4>
                                    <form action="testapi" method="post">
                                        <div id="appkeydiv" class="input-group wow fadeInUp animated" data-wow-delay=".5s">
                                            <input type="text" id="appkey" name="appkey" title="appkey - required only in production mode" class="form-control"  placeholder="appkey - required only in production mode" aria-describedby="basic-addon2">
                                        </div>
                                        <div id="acckeydiv" class="input-group wow fadeInUp animated" data-wow-delay=".5s">
                                                <input type="text" id="acckey" name="acckey" class="form-control" placeholder="accesskey" aria-describedby="basic-addon2">
                                        </div>
                                        <div id="secretdiv" class="input-group wow fadeInUp animated" data-wow-delay=".5s">
                                            <input type="text" id="secret" name="secretna" class="form-control" placeholder="secretkey" aria-describedby="basic-addon2">
                                        </div>
                                        <div class="input-group wow fadeInUp animated" data-wow-delay=".5s">
                                            <input type="text" id="s" name="service" class="form-control" placeholder="service" aria-describedby="basic-addon2">
                                        </div>
                                        <div class="input-group wow fadeInUp animated" data-wow-delay=".5s">
                                            <input type="text" id="r" name="routena" class="form-control"  title="route for the service- substitute url params having ':' prefix with values" placeholder="route for the service- substitute url params having ':' prefix with values" aria-describedby="basic-addon2">
                                        </div>
                                        <div class="input-group wow fadeInUp animated" data-wow-delay=".5s">
                                            <input type="text" id="m" name="method" class="form-control" placeholder="REST API method" aria-describedby="basic-addon2">
                                        </div>
                                        <div class="input-group wow fadeInUp animated" data-wow-delay=".5s">
                                            <input type="text" id="p" name="payload" class="form-control" placeholder="json payload" aria-describedby="basic-addon2">
                                        </div>
                                        <input type="submit"  name="action" value="test">
                                        <!--
                                        <input type="submit"  name="action" value="save">
                                        -->
                                    </form>
                                    <br>
                                    REPLExtra
                                </div>                    
                                <div class="item col-md-5 col-sm-6 col-xs-6">
                                    <h4 class="hdg wow input-group fadeInUp animated" data-wow-delay=".5s">Browse services and API</h4>
                                    <span class="dropdown input-group wow fadeInUp animated" data-wow-delay=".5s">
                                        <select id="servicelist" name="service" class="btn btn-primary form-control" >
                                            REPLservicelist
                                        </select>
                                    </span>
                                    
                                    <span class="dropdown input-group wow fadeInUp animated" data-wow-delay=".5s">
                                        <select name="route" id="routelist" class="btn btn-primary form-control" >
                                            REPLroutelist
                                        </select>
                                    </span>
                                    <h6><pre id="routedescription">test</pre></h6>
                                    <h6><pre id="routemethod"></pre></h6>
                                    <pre id="routeparamschema"></pre>
                                    <pre id="routebodyschema"></pre>
                                    <pre id="routeresponseschema"></pre>
                                    REPLRoute
                                </div>
                            </div><!--//card-wrapper-->	
                        </div> <!--content-inner-->
                    </div> <!-- doc-content -->			
                    <div class="doc-sidebar hidden-xs">
                            <nav id="doc-nav">
                                <ul id="doc-menu" class="nav doc-menu" data-spy="affix">
                                    <li><a href="/documentation">Home</a></li>
                                    <li>
                                        <a href="/test">Test Services</a>
                                    </li>
                                    <li>
                                        <a href="/testhttp">Test http endpoint</a>
                                    </li>
                              </ul><!--//doc-menu-->
                            </nav>
                    </div><!--//doc-sidebar-->
                </div> <!-- doc-body -->
            </div><!--//container-->
        </div><!--//doc-wrapper-->
        <!--
        </section>
        -->
   </div><!--//page-wrapper-->    
   <div class="page-footer-bar">
    <div class="bottom-nav-cheer-bar">
        <div class="copyright">
        </div>
</div>
</div>

    <!-- Main Javascript -->          
    <script type="text/javascript" src="assets/plugins/jquery-1.12.3.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>                                                                     
    <script type="text/javascript" src="assets/plugins/jquery-match-height/jquery.matchHeight-min.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>
    <script>
        function AddRoutes(s)
        {
            $.ajax({url: "routelist/"+s, success: function(routes){
                        var strHTML = "";
                        for(var r in routes)
                        {
                            if(routes[r].configured)
                            {
                                var ro = routes[r];
                                var strSel = "";
                                var nbsps = "";
                                for(var i=0;i<20;i++)
                                    nbsps += "&nbsp;-";
                                if(ro.type != "static")
                                    strHTML += "<option "+strSel+" value='"+ro.route+"@@@"+ro.type+"'>"+ro.route+nbsps+ro.type+" "+"</option>";
                            }
                        }
                        $("#routelist").html(strHTML);
                    },
                    error: function (req, status, error) {
                        $("#routelist").html("<option>"+error+"</option>");
                    }
                });

        }
        function AddRouteInfo(s, r)
        {
            if(!r)
                return;
            var ra = r.split("@@@")
            // ra array has two items route,method
            $("#r").val(ra[0]);
           $.ajax({url: "routeinfo/"+s+"?r="+ra[0]+"&m="+ra[1], success: function(ro){
                $("#routedescription").html(ro.description);
                $("#routemethod").html(ro.type);
                $("#m").val(ro.type);
                switch(ro.type)
                {
                    case "put":
                    case "post":
                        if(ro.examples && Array.isArray(ro.examples) && ro.examples[0])
                        {
                            var ex = ro.examples[0];
                            if(ex.payload)
                                $("#p").val(JSON.stringify(ex.payload));
                            if(ex.param)
                                $("#r").val(ex.param);
                        }
                        break;
                    case "get":
                    case "delete":
                            if(ro.examples && Array.isArray(ro.examples) && ro.examples[0])
                            {
                                var ex = ro.examples[0];
                                if(ex.param)
                                    $("#r").val(ex.param);
                            }
                            $("#p").val("json payload");
                        break;
                }
                if(ro.paramschema)
                {
                    $("#routeparamschema").show();
                    $("#routeparamschema").html("schmea for parameters="+JSON.stringify(ro.paramschema, 0, 2));
                }
                else
                    $("#routeparamschema").hide();
                if(ro.bodyschema)
                {
                    $("#routebodyschema").show();
                    $("#routebodyschema").html("schmea for json payload="+JSON.stringify(ro.bodyschema, 0, 2));
                }
                else
                    $("#routebodyschema").hide();
                if(ro.responseschema)
                {
                    $("#routeresponseschema").show();
                    $("#routeresponseschema").html("schmea for response="+JSON.stringify(ro.responseschema, 0, 2));
                }
                else
                    $("#routeresponseschema").hide();
            },
            error: function (req, status, error) {
                alert("status="+status+" response="+req.responseText);
            }
        });
        }

        function SetSVal(s)
        {
            var s = $('#servicelist').val();
            var sa = s.split("@@@");
            var sval = sa[1];
            var sec = sa[0];

            AddRoutes(sval);
            $("#s").val(sval);
            switch(sec)
            {
                case "basic":
                case "accesskey":
                    $("#appkeydiv").hide();
                    $("#acckeydiv").show();
                    $("#secretdiv").show();
                    break;
                case "appkey":
                    $("#appkeydiv").show();
                    $("#acckeydiv").hide();                
                    $("#secretdiv").hide();
                    break;
                default:
                    $("#appkeydiv").hide();
                    $("#acckeydiv").hide();
                    $("#secretdiv").hide();
                    break;
            }   
            return sval;
        }
        $(document).ready(function(){
            // default routes are populated with this call.
            var sval = SetSVal($('#servicelist').val());
            // For every change setup change callback.
            $("#servicelist").change(function(){
                var svalI = SetSVal($('#servicelist').val());
                setTimeout(function() {
                    AddRouteInfo(svalI, $("#routelist option:first").val());
                }, 100);
            });
            $("#routelist").change(function(){
                var sval = $('#s').val();
                console.log(sval);
                setTimeout(function() {
                    AddRouteInfo(sval, $('#routelist').val());
                }, 100);
            });
            $("#routelist").ready(function(){
                var si = setInterval(function() {
                    var r = $("#routelist option:first").val();
                    if(r)
                    {
                        clearInterval(si);
                        AddRouteInfo(sval, r);
                        setTimeout(function(){
                            var r = $("#rname").val();
                            if(r != "" && r != null)
                                $("#r").val(r);
                            var m = $("#rtype").val();
                            if(m != "" && m != null)
                                $("#m").val(m);
                            var p = $("#rpayload").val();
                            if(p != "" && p != null)
                                $("#p").val(p);
                        }, 100);
                    }
                }, 0);
            });
        });
    </script>
            
</body>
</html> 

